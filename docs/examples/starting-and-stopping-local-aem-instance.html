<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src\site\apt/examples\starting-and-stopping-local-aem-instance.apt.vm at 2022-07-20
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Olaf Otto" />
    <meta name="Date-Creation-yyyymmdd" content="20211101" />
    <meta name="Date-Revision-yyyymmdd" content="20220720" />
    <meta http-equiv="Content-Language" content="en" />
    <title>AEM Maven plugin &#x2013; Starting and stopping a local AEM instance</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script type="text/javascript" src="../js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>AEM Maven plugin</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2022-07-20<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.0.17-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../plugin-info.html" title="Goals"><span class="none"></span>Goals</a></li>
    <li><a href="http://www.apache.org/licenses/" class="externalLink" title="License"><span class="none"></span>License</a></li>
      <li class="nav-header">Examples</li>
    <li class="active"><a href="#"><span class="none"></span>Start, stop and kill an AEM instance</a></li>
    <li><a href="../examples/deploying-build-artifacts.html" title="Deploy files and artifacts to AEM"><span class="none"></span>Deploy files and artifacts to AEM</a></li>
    <li><a href="../examples/continuous-integration.html" title="Configure Continuous Integration"><span class="none"></span>Configure Continuous Integration</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<section>
<h2><a name="Starting_and_stopping_local_AEM_instances"></a>Starting and stopping local AEM instances</h2>
<p>The plugin expects an <a class="externalLink" href="https://helpx.adobe.com/experience-manager/6-4/sites/deploying/using/deploy.html#GettingtheSoftware">AEM quickstart jar</a> in the location target/aem/[type], e.g. target/aem/author. For instance, one can use the <a class="externalLink" href="https://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html">unpack mojo</a> of the maven-dependency-plugin to copy the quistart.jar and the license.properties there. Subsequently, invoking</p>
<div class="source"><pre class="prettyprint"> mvn aem:start
</pre></div>
<p>Will start the respective AEM instance. If the quickstart is started for the first time, i.e. AEM is installed, the start mojo will detect that and grant the startup process and inittialization more time to complete (three times the initialization wait time).</p>
<div class="source"><pre class="prettyprint"> mvn aem:stop
</pre></div>
<p>Will stop the previously started instance, if it is running. If stopping the instance gracefully fails within the configurable shutdownWaitTime, the plugin will attempt to kill the AEM process. You can also kill the process directly by invoking</p>
<div class="source"><pre class="prettyprint"> mvn aem:kill
</pre></div>
<p>The following is a sample POM using the maven-dependency-plugin to provide a quickstart.jar and license.properties.</p>
<p>The aem maven plugin is instructed to launch an instance in the <a class="externalLink" href="https://helpx.adobe.com/experience-manager/6-4/sites/administering/using/production-ready.html">nosamplecontent run mode</a> It expicitly configures the startup wait time to three minutes. When the plugin detects that the quickstart is started for the first time, it thus extends the startupWaitTime to 9 minutes.</p>
<div class="source"><pre class="prettyprint"> &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
          xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
     &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
     &lt;groupId&gt;com.example.company&lt;/groupId&gt;
     &lt;artifactId&gt;aem-integration&lt;/artifactId&gt;
     &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
     &lt;packaging&gt;pom&lt;/packaging&gt;
     &lt;name&gt;AEM integration module&lt;/name&gt;

     &lt;build&gt;
         &lt;plugins&gt;
             &lt;plugin&gt;
                 &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
                 &lt;version&gt;3.2.0&lt;/version&gt;
                 &lt;executions&gt;
                     &lt;execution&gt;
                         &lt;id&gt;prepare-aem-quickstart&lt;/id&gt;
                         &lt;phase&gt;generate-test-resources&lt;/phase&gt;
                         &lt;goals&gt;
                             &lt;goal&gt;unpack&lt;/goal&gt;
                         &lt;/goals&gt;
                         &lt;configuration&gt;
                             &lt;artifactItems&gt;
                                 &lt;artifactItem&gt;
                                     &lt;!-- In this example, we assume this zip contains a quickstart.jar and license.properties --&gt;
                                     &lt;groupId&gt;com.example.company&lt;/groupId&gt;
                                     &lt;artifactId&gt;aem-6.5&lt;/artifactId&gt;
                                     &lt;version&gt;1.0.0&lt;/version&gt;
                                     &lt;type&gt;zip&lt;/type&gt;
                                     &lt;overWrite&gt;true&lt;/overWrite&gt;
                                     &lt;outputDirectory&gt;${project.build.directory}/aem/author&lt;/outputDirectory&gt;
                                 &lt;/artifactItem&gt;
                             &lt;/artifactItems&gt;
                         &lt;/configuration&gt;
                     &lt;/execution&gt;
                 &lt;/executions&gt;
             &lt;/plugin&gt;
             &lt;plugin&gt;
                 &lt;groupId&gt;com.unic.maven.plugins&lt;/groupId&gt;
                 &lt;artifactId&gt;aem-maven-plugin&lt;/artifactId&gt;
                 &lt;version&gt;2.0.17-SNAPSHOT&lt;/version&gt;
                 &lt;configuration&gt;
                     &lt;!-- Up to three minutes startup wait time.
                     When the plugin detects that AEM is started for the first time (installed), this timeout is automatically tripled. --&gt;
                     &lt;startupWaitTime&gt;3&lt;/startupWaitTime&gt;
                     &lt;aemType&gt;author&lt;/aemType&gt;
                     &lt;runModes&gt;
                         &lt;runMode&gt;nosamplecontent&lt;/runMode&gt;
                     &lt;/runModes&gt;
                 &lt;/configuration&gt;
             &lt;/plugin&gt;
         &lt;/plugins&gt;
     &lt;/build&gt;

 &lt;/project&gt;
</pre></div></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2022.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
